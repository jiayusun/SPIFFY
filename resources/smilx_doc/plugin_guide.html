<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0//EN" "http://www.w3.org/Math/DTD/mathml2/xhtml-math11-f.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><!--This file was converted to xhtml by OpenOffice.org - see http://xml.openoffice.org/odf2xhtml for more info.--><head profile="http://dublincore.org/documents/dcmi-terms/"><meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8"/><title xml:lang="en-US">- no title specified</title><meta name="DCTERMS.title" content="" xml:lang="en-US"/><meta name="DCTERMS.language" content="en-US" scheme="DCTERMS.RFC4646"/><meta name="DCTERMS.source" content="http://xml.openoffice.org/odf2xhtml"/><meta name="DCTERMS.issued" content="2009-04-16T11:32:02.64" scheme="DCTERMS.W3CDTF"/><meta name="DCTERMS.modified" content="2013-05-01T12:24:30" scheme="DCTERMS.W3CDTF"/><meta name="DCTERMS.provenance" content="" xml:lang="en-US"/><meta name="DCTERMS.subject" content="," xml:lang="en-US"/><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" hreflang="en"/><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/" hreflang="en"/><link rel="schema.DCTYPE" href="http://purl.org/dc/dcmitype/" hreflang="en"/><link rel="schema.DCAM" href="http://purl.org/dc/dcam/" hreflang="en"/><style type="text/css">
	@page {  }
	table { border-collapse:collapse; border-spacing:0; empty-cells:show }
	td, th { vertical-align:top; font-size:12pt;}
	h1, h2, h3, h4, h5, h6 { clear:both }
	ol, ul { margin:0; padding:0;}
	li { list-style: none; margin:0; padding:0;}
	<!-- "li span.odfLiEnd" - IE 7 issue-->
	li span. { clear: both; line-height:0; width:0; height:0; margin:0; padding:0; }
	span.footnodeNumber { padding-right:1em; }
	span.annotation_style_by_filter { font-size:95%; font-family:Arial; background-color:#fff000;  margin:0; border:0; padding:0;  }
	* { margin:0;}
	.Heading_20_2 { font-size:14pt; margin-bottom:0.212cm; margin-top:0.423cm; font-family:Arial; writing-mode:page; font-style:italic; font-weight:bold; }
	.P1 { font-size:10.5pt; font-family:Times New Roman; writing-mode:page; }
	.P2 { font-size:10.5pt; font-family:Times New Roman; writing-mode:page; font-weight:bold; }
	.P3 { font-size:10.5pt; font-family:Times New Roman; writing-mode:page; }
	.P4 { font-size:10.5pt; font-family:Times New Roman; writing-mode:page; }
	.P5 { font-size:18pt; font-weight:bold; margin-bottom:0.212cm; margin-top:0.423cm; font-family:Arial; writing-mode:page; text-align:center ! important; }
	.Bullet_20_Symbols { font-family:OpenSymbol; }
	.T1 { font-weight:bold; }
	<!-- ODF styles with no properties representable as CSS -->
	.Numbering_20_Symbols { }
	</style></head><body dir="ltr" style="max-width:20.999cm;margin:2cm; margin-top:2cm; margin-bottom:2cm; margin-left:2cm; margin-right:2cm; writing-mode:lr-tb; "><h1 class="P5"><a id="a__A_Guide_to_writing_an_sMILX_plugin"><span/></a>A Guide to writing an sMILX plugin</h1><p class="P1">sMILX has three four types of plugins:</p><ul><li><p class="P3" style="margin-left:0cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0cm">•</span>A dock window plugin such as a log window or scripting console (see the python plugin)<span class="odfLiEnd"/> </p></li><li><p class="P3" style="margin-left:0cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0cm">•</span>An extension that implements one or a few context menu items for a type of data (see the denoise plugin)<span class="odfLiEnd"/> </p></li><li><p class="P3" style="margin-left:0cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0cm">•</span>A plugin that implements a display for another type of data including loading and saving of that data such as shape models (see the ssm plugin)<span class="odfLiEnd"/> </p></li><li><p class="P3" style="margin-left:0cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0cm">•</span>A full plugin that does all of the above.<span class="odfLiEnd"/> </p></li></ul><h2 class="Heading_20_2"><a id="a__Extensions"><span/></a>Extensions</h2><p class="P1">An extension is a light-weight plugin that provides just a few context menu entries by sub-classing the basic milxQt classes like milxQtImage or milxQtModel. An example of an extension is the deNoise plugin. Here the milxQtModel class is subclassed so that it can display models as well, implements a couple of further members and adjusts the context menu to suit. </p><p class="P1"> </p><p class="P1">A standard window, such as a model window, will show that an exentsion is available (show as a context menu entry). Clicking it will cause a new window to open, which is effectively the sub-classed version of the standard window shown before, but the context menu will be different and allow the user to execute the extra members in the sub-class.</p><p class="P1"> </p><p class="P2">This type of plugin is a quick and easy way to have a good start to develop a plugin. Only requires sub-classing a class like milxQtImage or milxQtModel.</p><p class="P1"> </p><h2 class="Heading_20_2"><a id="a__Dock_Plugins"><span/></a>Dock Plugins</h2><p class="P1">Examples of a dock plugin is the python plugin.</p><p class="P1"> </p><h2 class="Heading_20_2"><a id="a__Creation"><span/></a>Creation</h2><p class="P1">To create your own plugin:</p><ol><li><p class="P4" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0cm">1.</span>Download the latest “plugin_guide.tar.bz2” file from the home page or from within the sMILX.Help.<span class="odfLiEnd"/> </p></li><li><p class="P4" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0cm">2.</span>Choose a name for your plugin, you will be replacing _RENAME_ with that name. For arguments sake, lets call it DiffusionTensor.<span class="odfLiEnd"/> </p></li><li><p class="P4" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0cm">3.</span>Extract “plugin_guide.tar.bz2” and copy the milxQt_RENAME_Plugin.h and milxQt_RENAME_Plugin.cpp files to a directory for your plugin in the “plugin” directory of SMILI. In this example we will call the directory "dti".<span class="odfLiEnd"/> </p></li><li><p class="P4" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0cm">4.</span>Use find and replace to replace the string “_RENAME_” with the name of your plugin in both files and the CmakeLists.txt file.<span class="odfLiEnd"/> </p></li><li><p class="P4" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0cm">5.</span>Use find and replace to replace the string “_MYPLUGINCLASS_” with the name of your helper plugin class in both files (see SSMPlugin as an example of such a class). In this example, we call it "DTIPlugin". The helper class implements most of the plugin features for a plugin window. If you don't have a class, ensure the relevant members (such as isPluginWindow()) of the plugin class return false and remove references to milxQt_MYPLUGINCLASS_.<span class="odfLiEnd"/> </p></li><li><p class="P4" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0cm">6.</span>Repeat this with the CmakeLists.txt file, which will build the plugin.<span class="odfLiEnd"/> </p></li><li><p class="P4" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0cm">7.</span>You are now ready to implement your plugin. Implement the appropriate members of the plugin class, leaving the others blank or returning NULL. For implementing a threaded plugin, put your code into the “run()” member of the class. <span class="odfLiEnd"/> </p></li><li><p class="P4" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0cm">8.</span>Subclass one of the milxQt* classes, like milxQtModel or milxQtRenderWindow etc. And add the relelvant areas where instead NULL was returned. For example, for the case of milxQtModel subclassed plugin, you will need to update modelResult(), isPluginWindow(), pluginWindow(), loadExtension() and uncomment relevant parts of the constructor. See the attached DTI example upto this point as an example.<span class="odfLiEnd"/> </p><p class="P4" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0cm"><!-- --></span><span class="odfLiEnd"/> </p></li></ol><h2 class="Heading_20_2"><a id="a__Troubleshooting"><span/></a>Troubleshooting</h2><p class="P2">Help! My plugin doesn't load!?!</p><p class="P1">Check that you have linked all the relevant libraries correctly. DLLs or shared objects with unresolved externals will be ignored by the sMILX plugin loader. If this is correct, check the naming of the classes in your plugin class. Especially at the line “Q_EXPORT_PLUGIN2(_RENAME_Plugin, milxQt_RENAME_PluginFactory);”. Finally, check to see if you have not redefined/reimplemented an implemented function in milxQtPluginInterface. </p><p class="P1"><span class="T1">I get the error “cannot allocate an object of abstract type ‘Classname’” error!</span> </p><p class="P1">The class milxQtPluginInterface is a virtual class, this means that when milxQtMain calls its members, the members of derived classes are called instead. This requires that your plugin (derived) class MUST have at least the same members (that are = 0) as milxQtPluginInterface. It can have more, but as a minimal, it must have the same members, i.e. it must be a superset of members. Ensure that any member of milxQtPluginInterface that is = 0 is present in your class at least empty. For example, virtual void loadExtension() = 0; is</p><p class="P1">virtual void loadExtension() {}</p><p class="P1">Already implemented members of milxQtPluginInterface can be ignored.</p></body></html>
